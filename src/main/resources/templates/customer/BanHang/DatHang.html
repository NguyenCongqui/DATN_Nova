<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
>
<head>
    <meta charset="UTF-8">
    <title>Đặt hàng</title>
    <!--    <link rel="stylesheet" th:href="@{/admin/css/banHang/banHangOnline.css}">-->
    <link rel="shortcut icon" th:href="@{/static/customer/img/NOVA.png}" type="image/x-icon">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="/static/admin/js/banHang/banHangOnline/banHangOnline.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.5/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.5/dist/sweetalert2.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <link href="../../../static/customer/css/plugins/bootstrap.css" rel="stylesheet" type="text/css"/>
    <!-- bootstrap css -->
    <link href="../../../static/customer/css/plugins/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    <!-- fontawesome css -->
    <link href="../../../static/customer/css/plugins/animate.css" rel="stylesheet" type="text/css"/>
    <!-- animate css -->
    <link href="../../../static/customer/css/style.css" rel="stylesheet" type="text/css"/>
    <!-- template css -->
    <link href="../../../static/customer/plugins/rev_slider/css/settings-ver.5.3.1.css" rel="stylesheet"
          type="text/css"/>


    <style>
        /*.ThongTinSP {*/
        /*    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;*/
        /*    font-size: 0.8em;*/
        /*}*/
        .content-page1 {
            padding-bottom: 0px;
            padding-top: 0px;
        }

        #buttonDatHang,
        #buttonThanhToan {
            display: none;
        }

        @media (min-width: 1200px) {
            .container {
                width: 1440px;
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
<!-- Page Content Wraper -->
<div th:replace="customer/layout/header :: header"></div>
<div class="page-content-wraper "

     th:each="hoaDonOnline: ${hoaDon}">
    <!-- Bread Crumb -->
    <section class="breadcrumb">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <nav class="breadcrumb-link">
                        <a th:href="@{/khachhang/home}">Trang chủ</a>
                        <span>Thanh toán</span>
                    </nav>
                </div>
            </div>
        </div>
    </section>
    <!-- Bread Crumb -->

    <br>
    <br> <!-- Page Content -->
    <section class="content-page1">
        <div class="container mb-8">
            <div class="row">
                <div class="col-sm-12">
                    <article class="post-8">
<!--                        <form class="product-checkout mt-45">-->
                            <div class="row">
                                <div class="col-md-5">
                                    <h3 style="text-align: center;" id="thongTinGiaohang"><i class="fa-solid fa-circle-info"></i> Chi Tiết Thanh Toán</h3>
                                    <div class="row">
                                        <div class="form-field-wrapper form-center col-sm-12">
                                            <label class="left">Họ Và Tên</label>
                                            <input class="input-md form-full-width" id="hoTen" name="hoTen"
                                                   title="Company Name" value=""
                                                   th:value="${hoaDon.getKhachHang() != null ? hoaDon.getKhachHang().hoTen : ''}"
                                                   placeholder="Họ Và Tên" type="text">
                                        </div>
                                        <div class="form-field-wrapper form-center col-sm-6">
                                            <label class="left">
                                                Số Điện Thoại
                                                <abbr class="form-required" title="required">*</abbr></label>
                                            <input class="input-md form-full-width" id="sdt" name="sdt" title="phone"
                                                   th:value="${hoaDon.getKhachHang() != null ? hoaDon.getKhachHang().soDienThoai : ''}"
                                                   value="" placeholder="(+84)" type="tel" required=""
                                                   aria-required="true">
                                        </div>
                                        <div class="form-field-wrapper form-center col-sm-6">
                                            <label class="left">
                                                Email
                                                <abbr class="form-required" title="required">*</abbr></label>
                                            <input class="input-md form-full-width" id="nhapEmail" name="nhapEmail"
                                                   th:value="${hoaDon.getKhachHang() != null ? hoaDon.getKhachHang().email : ''}"
                                                   title="Enter Email" value="" placeholder="Email" type="email"
                                                   required="" aria-required="true">
                                        </div>

                                        <div class="form-center col-sm-4">
                                            <label class="left">
                                                Tỉnh/Thành Phố
                                                <abbr class="form-required" title="required">*</abbr></label>
                                            <select name="billing_country" id="province"
                                                    class="input-md form-full-width tinhThanhPho" autocomplete="country"
                                                    tabindex="-1" aria-hidden="true" required="" aria-required="true">
                                                <option value="">Chọn Tỉnh/Thành Phố</option>
                                            </select>
                                        </div>
                                        <div class="form-center col-sm-4">
                                            <label class="left">
                                                Quận/Huyện
                                                <abbr class="form-required" title="required">*</abbr></label>
                                            <select name="billing_country" id="district" disabled
                                                    class="input-md form-full-width chonQuanHuyen"
                                                    autocomplete="country" tabindex="-1" aria-hidden="true" required=""
                                                    aria-required="true">
                                                <option value="">Chọn Quận/Huyện</option>
                                            </select>
                                        </div>
                                        <div class="form-center col-sm-4">
                                            <label class="left">
                                                Phường/Xã
                                                <abbr class="form-required" title="required">*</abbr></label>
                                            <select name="billing_country" id="ward" disabled
                                                    class="input-md form-full-width chonPhuongXa" autocomplete="country"
                                                    tabindex="-1" aria-hidden="true" required="" aria-required="true">
                                                <option value="">Chọn Phường/Xã</option>
                                            </select>
                                        </div>


                                        <div class="form-field-wrapper form-center col-sm-12">
                                            <label class="left">
                                                Địa Chỉ
                                                <abbr class="form-required" title="required">*</abbr></label>
                                            <input class="input-md form-full-width mb-20 addressInput" id="addressInput"
                                                   th:value="${diaChi != null ? diaChi.getDiaChi() : ''}"
                                                   name="addressInput" title="Address" value="" placeholder="Địa chỉ cụ thể"
                                                   type="text" required="" aria-required="true">
                                        </div>
                                        <div class="form-field-wrapper form-center col-sm-12">
                                            <label class="left">
                                                Ghi Chú (tùy chọn)
                                            </label>
                                            <textarea name="note" id="note" th:text="${hoaDon.ghiChu}" value=""
                                                      style="width: 540px; height: 120px;"
                                                      placeholder="Nhập ghi chú đơn hàng" type="text" required=""
                                                      aria-required="true">
                                                    </textarea>
                                        </div>
                                       <div>
                                          <button class="btn btn-md btn-black"><a th:href="@{/khachhang/gio-hang-chi-tiet}" class="cart-link2" style="color: #FFFFFF"><i class="fa-solid fa-arrow-left"></i> Quay Lại Giỏ hàng</a></button>
                                       </div>

                                    </div>

                                </div>
                                <div class="col-md-7">
                                    <div class="checkout-order-review">
                                        <h3 style="text-align: center"><i
                                                class="fas fa-file-signature"></i> Đơn Hàng Của Tôi</h3>
                                        <div class="product-checkout-review-order">
                                            <div class="responsive-table">
                                                <div class="table-wrapper">
                                                    <table class="tablea">
                                                        <thead>
                                                        <tr>
                                                            <th>Sản phẩm</th>
                                                            <th>Số lượng</th>
                                                            <th>Thành tiền</th>
                                                        </tr>
                                                        </thead>
                                                        <tbody>
                                                        <tr class="product-row"
                                                            th:each="hoaDonCT, iter: ${hoaDonChiTiet}">
                                                            <td>
                                                                <div style="display: flex; align-items: center;">
                                                                    <img th:src="${'/khachhang/images/' + tenAnhChinhList[iter.index]}"
                                                                         alt=""
                                                                         style="margin-right: 10px;" width="100px"
                                                                         height="100px">

                                                                    <div>
                                                                        <h6>
                                                                            <strong>
                                                                                        <span style="text-transform: uppercase"
                                                                                              class="TenSP"
                                                                                              th:text="${hoaDonCT.chiTietSanPham.sanPham.tenSanPham}"></span>
                                                                            </strong>
                                                                        </h6>
                                                                        <div class="ThongTinSP">
                                                                            <span th:text="${hoaDonCT.chiTietSanPham.mauSac.tenMauSac}"></span>
                                                                            <span>/</span>
                                                                            <span th:text="${hoaDonCT.chiTietSanPham.kichCo.tenKichCo}"></span>
                                                                            <br>
                                                                            <span th:text="${#numbers.formatDecimal(hoaDonCT.chiTietSanPham.sanPham.gia, 0, 'COMMA', 0, 'POINT')} + ' VNĐ'">100,000</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td th:text="${hoaDonCT.soLuong}"></td>
                                                            <td th:text="${#numbers.formatDecimal(hoaDonCT.tongTien, 0, 'COMMA', 0, 'POINT')} + ' VNĐ'"></td>
                                                        </tr>

                                                        </tbody>
                                                    </table>
                                                </div>
                                                <hr>
                                                <br>
                                                <div class="coupon div-maGiamGia">
                                                    <input class="input-md" id="maGiamGia" name="maGiamGia"
                                                           title="Coupon Code" value="" placeholder="Mã Giảm Giá"
                                                           type="text">
                                                    <button class="btn btn-md btn-black themMaGiamGiaOnline"
                                                            type="submit" th:attr="data-id=${hoaDon.idHoaDon}">Sử Dụng
                                                    </button>
                                                </div>
                                                <table>

                                                    <tfoot>
                                                    <tr class="cart-subtotal">
                                                        <th>Tạm Tính: </th>
                                                        <td>
                                                            <strong><span class="product-price-amount amount"
                                                                          id="subtotal"
                                                                          th:text="${#numbers.formatDecimal(hoaDon.tongTienDonHang, 0, 'COMMA', 0, 'POINT')} + ' đ'">
                                                                <span class="currency-sign">

                                                                </span></span>
                                                            </strong>
                                                        </td>
                                                    </tr>
                                                    <tr class="shipping">
                                                        <th>Phí Vận Chuyển: </th>
                                                        <td>
                                                            <ul id="shipping_method">
                                                                <li>
                                                                    <label for="shipping_method" type="text"
                                                                           id="shippingFee" readonly>
                                                                        <span class="woocommerce-Price-amount amount">
                                                                        <span class="woocommerce-Price-currencySymbol">
                                                                            </span>
                                                                        </span>
                                                                    </label>
                                                                </li>
                                                            </ul>
                                                        </td>
                                                    </tr>
                                                    <tr class="shipping">
                                                        <th>Giảm Giá Đã áp dụng: </th>
                                                        <td>
                                                            <ul id="shipping_method">
                                                                <li>
                                                                    <label for="shipping_method" id="tenGiamGia">
                                                                        <span class="woocommerce-Price-amount amount">
                                                                       <span id="tenGiamGia"></span>
                                                                        </span>
                                                                    </label>
                                                                </li>
                                                            </ul>
                                                        </td>
                                                    </tr>
                                                    <tr class="shipping">
                                                        <th>Giảm Giá: </th>
                                                        <td>
                                                            <ul id="shipping_method">
                                                                <li>
                                                                    <label for="shipping_method" id="discount">
                                                                        <span class="woocommerce-Price-amount amount">
                                                                       <span id="discount">0 đ</span>
                                                                        </span>
                                                                    </label>
                                                                </li>
                                                            </ul>
                                                        </td>
                                                    </tr>
                                                    <tr class="order-total">
                                                        <th>Tổng Cộng: </th>
                                                        <td class="tongCongTien">
                                                            <span class="product-price-amount amount">
                                                                <span class="currency-sign" id="total"></span>
                                                            </span>
                                                        </td>
                                                    </tr>

                                                    </tfoot>
                                                </table>
                                            </div>

                                            <p class="cac-title"><h5><b><i class="fa-solid fa-scroll"></i> Phương thức thanh toán</b></h5></p>

                                            <div class="product-checkout-payment thanhToan">
                                                <di class="radioThanhToan">
                                                    <ul>
                                                        <li>
                                                            <input id="shipCOD" name="paymentMethod" value="method1"
                                                                   type="radio"/>
                                                            <label for="shipCOD" class="payment-label"
                                                                   id="thanhToanKhiNhanHang"><i class="fas fa-truck"></i> Thanh Toán Khi Nhận
                                                                Hàng</label>
                                                        </li>
                                                        <li>
                                                            <input id="VNPAY" name="paymentMethod" value="method2"
                                                                   type="radio"/>
                                                            <label for="VNPAY" class="payment-label"
                                                                   id="chuyenKhoanNganHang"><i class="fas fa-university"></i> Chuyển Khoản Ngân
                                                                Hàng</label>
                                                        </li>
                                                    </ul>
                                                </di>
                                            </div>


                                            <div class="button-container">
                                                <div class="button-group">
<!--                                                    <form th:action="@{/payment/create}" method="post" id="paymentForm">-->
                                                        <input type="hidden" name="orderCode" id ="id-hoa-don"
                                                               th:value="${hoaDon.idHoaDon}"/>

                                                        <input type="hidden" id="amountInput" name="amount" value=""/>

                                                        <input type="hidden" name="diaChiGiaoHang" id="diaChiGiaoHang"
                                                               value="">

                                                        <input type="hidden" name="tienShipHD" id="tienShipHD" value="">

                                                        <input type="hidden" name="tienGiamGia" id="tienGiamGia"
                                                               value="">

                                                        <input type="hidden" name="nameGiamGia" id="nameGiamGia"
                                                               value="">

                                                        <input type="hidden" name="nguoiNhan" id="nguoiNhan" value="">

                                                        <input type="hidden" name="sdtNguoiNhan" id="sdtNguoiNhan"
                                                               value="">

                                                        <input type="hidden" name="ghiChu" id="ghiChu" value="">

                                                        <input type="hidden" name="emailNguoiNhann" id="emailNguoiNhann"
                                                               value="">

<!--                                                    </form>-->

                                                    <!--Thanh Toan-->
                                                    <div class="place-order">
                                                        <button type="submit" id="buttonThanhToan"
                                                                class="button-thanhToan btn btn-lg btn-color form-full-width"
                                                                th:attr="data-id=${hoaDon.idHoaDon}">Thanh Toán
                                                        </button>
                                                    </div>

                                                    <div class="modal fade thanhToanVNPAY" tabindex="-1"
                                                         aria-labelledby="thanhToanVNPAYModalLabel" aria-hidden="true">
                                                        <div class="modal-dialog modal-dialog-centered">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title"
                                                                        id="thanhToanVNPAYModalLabel"> Đặt hàng
                                                                    </h5>
                                                                    <a class="btn-khong"><button type="button" class="btn-close"
                                                                            data-bs-dismiss="modal"
                                                                            aria-label="Close"></button></a>
                                                                </div>
                                                                <div class="modal-body">
                                                                    Bạn muốn đặt hàng?
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button"
                                                                            class="btn btn-primary btn-dong-y">Đồng ý
                                                                    </button>
                                                                    <button type="button"
                                                                            class="btn btn-secondary btn-khong"
                                                                            data-bs-dismiss="modal">Không
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>


                                                    <button id="buttonDatHang"
                                                            class="button-datHang btn btn-lg btn-color form-full-width"
                                                            th:data-id="${hoaDon.idHoaDon}">Đặt hàng
                                                    </button>


                                                    <!--                                                        <button id="buttonDatHang" class="button-datHang" th:data-id="${hoaDon.idHoaDon}">Đặt hàng</button>-->

                                                    <div class="modal fade DatHangShipCod" tabindex="-1"
                                                         aria-labelledby="DatHangShipCodModalLabel" aria-hidden="true">
                                                        <div class="modal-dialog modal-dialog-centered">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title"
                                                                        id="DatHangShipCodModalLabel"> Đặt hàng
                                                                    </h5>
                                                                    <a class="btn-khong"><button type="button" class="btn-close"
                                                                            data-bs-dismiss="modal"
                                                                              aria-label="Close"></button></a>
                                                                </div>
                                                                <div class="modal-body">
                                                                    Bạn muốn đặt hàng?
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button"
                                                                            class="btn btn-primary btn-dong-y">Đồng ý
                                                                    </button>
                                                                    <button type="button"
                                                                            class="btn btn-secondary btn-khong"
                                                                            data-bs-dismiss="modal">Không
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>


                                            <!--                                                <div class="place-order">-->
                                            <!--                                                    <a class="btn btn-lg btn-color form-full-width" href="#">Thanh Toán</a>-->
                                            <!--                                                </div>-->
                                            <!--                                           -->

                                        </div>
                                    </div>
                                </div>
                            </div>
<!--                        </form>-->
                    </article>
                </div>
            </div>
        </div>

    </section>
    <!-- End Page Content -->

</div>


</body>
</html>